<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title> GROUP - Thanh toán</title>
    <link rel="stylesheet" href="style11.css">
</head>
<body>

<div class="top-bar">
    <div>524107248</div>
    <div>
        <a href="#">Facebook</a>
        <a href="#">Twitter</a>
        <a href="#">YouTube</a>
    </div>
</div>

<div id="header-container"></div>

<script>
fetch("header.html")
    .then(response => response.text())
    .then(data => {
        document.getElementById("header-container").innerHTML = data;
    });
</script>

<section class="section">
    <h2>Thanh toán / Đặt cọc</h2>
    <div class="form-card" style="max-width: 600px; margin-top:20px;">
        <h2>Thông tin thanh toán</h2>

<form id="checkoutForm">
    <div class="form-group">
        <label>Tên dự án</label>
        <span id="checkoutProjectName">Dự án</span>

        <input type="text" id="projectName" value="Văn Duy Riverside">
    </div>

    <div class="form-group">
        <label>Loại sản phẩm</label>
        <select id="productType">
            <option>Căn hộ 2PN</option>
            <option>Căn hộ 3PN</option>
            <option>Nhà phố</option>
            <option>Đất nền</option>
        </select>
    </div>

    <div class="form-group">
        <label>Số tiền đặt cọc (VNĐ)</label>
        <input type="text" id="depositAmount" value="100000000">
    </div>

    <div class="form-group">
        <label>Họ tên khách hàng</label>
        <input type="text" id="customerName" placeholder="Nguyễn Văn A">
    </div>

    <div class="form-group">
        <label>Số CMND/CCCD</label>
        <input type="text" id="customerId">
    </div>

    <div class="form-group">
        <label>Phương thức thanh toán</label>
        <select id="paymentMethod">
            <option>Chuyển khoản ngân hàng</option>
            <option>Thẻ tín dụng / Ghi nợ</option>
            <option>Tiền mặt tại sàn giao dịch</option>
        </select>
    </div>

    <div class="form-actions">
      
        <button type="button" id="btnConfirmPayment" class="btn-primary">
            XÁC NHẬN THANH TOÁN
        </button>
        <button type="reset" class="btn-outline">Hủy</button>
    </div>
</form>

</section>

<footer>
    © 2025 LVD GROUP – Sàn giao dịch bất động sản cao cấp.
</footer>
<script>
    const btnConfirm = document.getElementById("btnConfirmPayment");

    btnConfirm.addEventListener("click", function () {
        const projectName   = document.getElementById("projectName").value.trim();
        const productType   = document.getElementById("productType").value;
        const depositAmount = document.getElementById("depositAmount").value.trim();
        const customerName  = document.getElementById("customerName").value.trim();
        const customerId    = document.getElementById("customerId").value.trim();
        const paymentMethod = document.getElementById("paymentMethod").value;

      
        if (!customerName || !customerId || !depositAmount) {
            alert("Vui lòng nhập đầy đủ Họ tên, Số CMND/CCCD và Số tiền đặt cọc.");
            return;
        }


        const paymentInfo = {
            projectName,
            productType,
            depositAmount,
            customerName,
            customerId,
            paymentMethod,
            time: new Date().toLocaleString()
        };

        localStorage.setItem("lvdLastPayment", JSON.stringify(paymentInfo));

        alert("Xác nhận thanh toán thành công! Chúng tôi sẽ liên hệ với bạn sớm.");

       
        window.location.href = "trangchu.html";
    });
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
    const btn = document.getElementById("btnConfirmPayment");
    if (!btn) return;

    btn.addEventListener("click", function (e) {
        e.preventDefault(); // chặn submit form nếu có

        // Lấy thông tin trên form
        const projectNameEl = document.getElementById("checkoutProjectName");
        const amountEl      = document.getElementById("depositAmount");
        const nameEl        = document.getElementById("customerName");
        const idEl          = document.getElementById("customerId");
        const methodEl      = document.getElementById("paymentMethod");

        const projectName = projectNameEl ? projectNameEl.textContent.trim() : "";
        const amount      = amountEl ? amountEl.value.trim() : "";
        const customer    = nameEl ? nameEl.value.trim() : "";
        const cmnd        = idEl ? idEl.value.trim() : "";
        const method      = methodEl ? methodEl.value : "";

        if (!projectName || !amount || !customer) {
            alert("Vui lòng nhập đầy đủ thông tin bắt buộc.");
            return;
        }

        // Tạo 1 bản ghi lịch sử
        const record = {
            projectName: projectName,
            amount: amount,
            customer: customer,
            cmnd: cmnd,
            method: method,
            time: new Date().toLocaleString("vi-VN")
        };

        // Lấy lịch sử cũ trong localStorage
        let history = [];
        try {
            history = JSON.parse(localStorage.getItem("lvdHistory") || "[]");
        } catch (e) {
            history = [];
        }

        // Thêm bản ghi mới
        history.push(record);

        // Lưu lại
        localStorage.setItem("lvdHistory", JSON.stringify(history));

        alert("Xác nhận thanh toán / đặt cọc thành công!");

        // Chuyển đến trang lịch sử
        window.location.href = "lichsu.html";
    });
});
</script>


</body>
</html>
<script src="header.js"></script>
